(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7ecd"],{"2f2b":function(t,e,a){},"3ab6":function(t,e,a){"use strict";var s=a("2f2b"),i=a.n(s);i.a},4216:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{attrs:{gutter:20}},[a("i-col",{attrs:{span:"6"}},[a("Card",{attrs:{title:"主机列表",shadow:""}},[a("Tree",{attrs:{data:t.data1,"load-data":t.loadData},on:{"on-select-change":t.onclickTreeNode}})],1)],1),a("i-col",{attrs:{span:"18"}},[a("Card",{attrs:{title:t.type,shadow:""}},[a("Table",{attrs:{border:"",columns:t.vmColumns,data:t.vmData}})],1),a("Row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[a("i-col",{attrs:{span:"12"}},[a("Card",{attrs:{title:"CPU使用率",shadow:""}},[a("div",{staticStyle:{height:"300px"},attrs:{id:"pie1"}})])],1),a("i-col",{attrs:{span:"12"}},[a("Card",{attrs:{title:"内存使用率",shadow:""}},[a("div",{staticStyle:{height:"300px"},attrs:{id:"pie2"}})])],1)],1)],1)],1),t.isLoading?a("Spin",{staticStyle:{background:"rgba(255,255,255,0)"},attrs:{fix:""}},[a("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"50"}}),a("div",{staticStyle:{"font-size":"24px"}},[t._v("Loading")])],1):t._e()],1)},i=[],o=(a("7f7f"),a("cadf"),a("551c"),a("097d"),{name:"join_page",data:function(){return{vmColumns:[{title:"hostName",key:"hostName"},{title:"IP",key:"ip"},{title:"cpu核数",key:"cpuNums"},{title:"状态",key:"status"},{title:"内存大小",key:"physicsMemorySum"},{title:"硬盘大小",key:"diskTotal"}],isLoading:!0,type:"主机信息",data1:[],vmData:[]}},mounted:function(){this.onloadeVirtualMachine()},methods:{onloadeVirtualMachine:function(){var t=this;this.axios.get(this.ajaxUrl.path+"/mic/manager/host/all").then(function(e){console.log(e);for(var a=e.data.result,s=0;s<a.length;s++){var i={};0==s&&(i.selected=!0),i.title=a[s].ip,i.type="ip",i.loading=!1,i.children=[],t.data1.push(i)}t.onclickTreeNode([t.data1[0]])}).catch(function(t){console.log(t)})},loadData:function(t,e){var a=this;console.log(t),setTimeout(function(){var s=[],i=t.title;a.axios.get(a.ajaxUrl.path+"/mic/manager/host/vm?hostName="+i).then(function(t){console.log(t);for(var a=t.data.result,o=0;o<a.length;o++){var n={};n.title=a[o].name,n.type="vm",n.ip=a[o].ip,n.hostName=i,n.cpuNums=a[o].cpuNums,n.status=a[o].status,n.physicsMemorySum=a[o].physicsMemorySum/1024+" GB",n.diskTotal=Math.ceil(a[o].diskTotal/1024/1024)+" GB",n.cpuUsageRate=a[o].cpuUsageRate,n.physicsMemoryUsageRate=a[o].physicsMemoryUsageRate,n.children=[],s.push(n)}e(s)})},1e3)},onclickTreeNode:function(t){var e=this;this.isLoading=!0;var a=t[0].title,s=t[0].type;if("ip"==s)this.axios.get(this.ajaxUrl.path+"/mic/manager/host?hostName="+a).then(function(t){console.log(t);var a=t.data.result;a.hostName=a.name,a.physicsMemorySum=Math.ceil(a.physicsMemorySum/1024)+" GB",a.diskTotal=Math.ceil(a.diskTotal/1024/1024/1024)+" TB";var s=[a];e.vmData=s;var i={};i.cpuUsageRate=s[0].cpuUsageRate,i.cpuUnusedRate=100-s[0].cpuUsageRate,e.showCpuPie(i);var o={};o.UsageRate=s[0].physicsMemoryUsageRate,o.UnusedRate=100-s[0].physicsMemoryUsageRate,e.showMemoryPie(o)});else if("vm"==s){this.type="虚拟机信息",this.vmData=t,console.log(t);var i={};i.cpuUsageRate=t[0].cpuUsageRate,i.cpuUnusedRate=100-t[0].cpuUsageRate,this.showCpuPie(i);var o={};o.UsageRate=t[0].physicsMemoryUsageRate,o.UnusedRate=100-t[0].physicsMemoryUsageRate,this.showMemoryPie(o)}},showCpuPie:function(t){var e=document.getElementById("pie1"),a=this.echarts.init(e),s={title:{text:"",subtext:"",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["已占用","未占用"]},series:[{name:"CPU使用率",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:t.cpuUsageRate,name:"已占用"},{value:t.cpuUnusedRate,name:"未占用"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};a.setOption(s)},showMemoryPie:function(t){var e=document.getElementById("pie2"),a=this.echarts.init(e),s={title:{text:"",subtext:"",x:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["已占用","未占用"]},series:[{name:"内存使用率",type:"pie",radius:"55%",center:["50%","60%"],data:[{value:t.UsageRate,name:"已占用"},{value:t.UnusedRate,name:"未占用"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};a.setOption(s),this.isLoading=!1}}}),n=o,r=(a("3ab6"),a("2877")),l=Object(r["a"])(n,s,i,!1,null,null,null);l.options.__file="virtual-machine.vue";e["default"]=l.exports}}]);