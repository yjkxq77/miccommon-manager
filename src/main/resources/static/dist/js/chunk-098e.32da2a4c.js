(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-098e"],{"0659":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Row",{attrs:{gutter:20}},[e("i-col",{attrs:{span:"5"}},[e("Card",{attrs:{title:"主机列表",shadow:""}},[e("Tree",{attrs:{data:t.data1,"load-data":t.loadData},on:{"on-select-change":t.onclickTreeNode}})],1)],1),e("i-col",{attrs:{span:"19"}},[e("Card",{attrs:{title:"日志信息列表",shadow:""}},[e("Table",{attrs:{border:"",columns:t.logcolumns,data:t.logData}}),e("Page",{staticStyle:{"margin-top":"20px"},attrs:{total:t.total,size:"small","show-total":"","show-elevator":""},on:{"on-change":t.onclickPage}})],1)],1)],1),t.isLoading?e("Spin",{staticStyle:{background:"rgba(255,255,255,0)"},attrs:{fix:""}},[e("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"50"}}),e("div",{staticStyle:{"font-size":"24px"}},[t._v("Loading")])],1):t._e()],1)},o=[],n=(e("7f7f"),e("cadf"),e("551c"),e("097d"),{name:"join_page",data:function(){return{formItem:{input:""},logcolumns:[{title:"日志名称",key:"name"},{title:"日志大小",key:"size"},{title:"下载日志",key:"longName"}],logData:[],isLoading:!0,data1:[],logServerData:[],logListTmp:[],total:0,page:{pageSize:10,pageNum:1}}},mounted:function(){this.onloadeVirtualMachine()},methods:{onloadeVirtualMachine:function(){var t=this;this.axios.get(this.ajaxUrl.path+"/mic/manager/log/").then(function(a){for(var e=a.data.result,i=0;i<e.length;i++){var o={};o.title=e[i],o.loading=!1,o.type="ip",o.children=[],t.data1.push(o)}t.isLoading=!1}).catch(function(t){console.log(t)})},loadData:function(t,a){var e=this;setTimeout(function(){var i=[],o=t.title;e.axios.get(e.ajaxUrl.path+"/mic/manager/log/one-depth?oneDepthName="+o).then(function(t){for(var e=t.data.result,n=0;n<e.length;n++){var l={};l.title=e[n],l.expand=!0,l.type="filename",l.ip=o,l.children=[],i.push(l)}a(i)}).catch(function(t){console.log(t)})},1e3)},onclickTreeNode:function(t){var a=this,e=t[0].title,i=(t[0].nodeKey,t[0].type);if("ip"==i);else if("filename"==i){var o=t[0].ip;this.logData=[],this.axios.get(this.ajaxUrl.path+"/mic/manager/log/one-depth/second-depth?oneDepthName="+o+"&secondDepthName="+e).then(function(t){var e=t.data.result;a.total=e.length,a.logListTmp=e,a.onclickPageChangeData()}).catch(function(t){console.log(t)})}},onclickPageChangeData:function(){Math.ceil(this.total/this.page.pageSize);var t=this.page.pageSize*(this.page.pageNum-1),a=this.page.pageSize*this.page.pageNum;a>=this.total&&(a=this.total);for(var e=t;e<a;e++){var i={};i.name=this.logListTmp[e].name,i.size=this.logListTmp[e].size/1024+"MB",i.longName=this.logListTmp[e].longName,this.logData.push(i)}},onclickPage:function(t){this.logData=[],this.page.pageNum=t,this.onclickPageChangeData()}}}),l=n,s=(e("7ed4"),e("2877")),c=Object(s["a"])(l,i,o,!1,null,null,null);c.options.__file="log-management.vue";a["default"]=c.exports},"7ed4":function(t,a,e){"use strict";var i=e("f6eb"),o=e.n(i);o.a},f6eb:function(t,a,e){}}]);